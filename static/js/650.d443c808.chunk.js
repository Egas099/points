"use strict";(self.webpackChunkpoints_client=self.webpackChunkpoints_client||[]).push([[650],{1749:function(e,t,n){n.d(t,{B:function(){return d}});var r=n(3433),i=n(9439),a=n(2791),o=n(6030),s=n(9271),l=n(7477),u=n.n(l),c=n(3962),f=n(7898);function d(){var e=u()("saves",[]),t=(0,i.Z)(e,2),n=t[0],l=t[1],d=(0,o.I0)(),p=(0,s.k6)();return(0,a.useEffect)((function(){Array.isArray(n)||l([])}),[n]),{savesList:n,saveGame:function(e){var t=function(e){return{date:Date.now(),appVersion:f.Ji,state:{field:e.field,gameState:e.gameState}}}(e);l([t].concat((0,r.Z)(n)))},deleteSave:function(e){return l(n.filter((function(t){return t.date!==e})))},deleteAllSaves:function(){return l([])},loadSave:function(e){var t=n.find((function(t){return t.date===e}));t?(d(c.wc(t.state)),p.push("/single")):console.error("The save requested for loading was not found.")}}}},1573:function(e,t,n){n.d(t,{i:function(){return r}});var r=n(6030).v9},9650:function(e,t,n){n.r(t),n.d(t,{default:function(){return je}});var r=n(9439),i=n(2791),a=n(2386),o=n(1573),s="CellItem_wrapper__l0x3z",l="CellItem_content__ri7Ap",u="CellItem_mover__YWLuu",c=n(322),f=n(184),d={0:(0,f.jsx)(f.Fragment,{}),1:(0,f.jsx)(f.Fragment,{children:"\u2022"}),2:(0,f.jsx)(f.Fragment,{children:"\u2022\xa0\u2022"}),3:(0,f.jsxs)(f.Fragment,{children:["\u2022",(0,f.jsx)("br",{}),"\u2022\xa0\u2022"]}),4:(0,f.jsxs)(f.Fragment,{children:["\u2022\xa0\u2022",(0,f.jsx)("br",{}),"\u2022\xa0\u2022"]}),5:(0,f.jsxs)(f.Fragment,{children:["\u2022\xa0\u2022",(0,f.jsx)("br",{}),"\u2022",(0,f.jsx)("br",{}),"\u2022\xa0\u2022"]})},p=function(e){var t=e.id,n=e.count,r=e.player,i=e.exist,a=e.isMover,o=e.move,p="".concat(s," ").concat(a?u:""),m="".concat(l," ").concat((0,c.U)(r,n));return(0,f.jsx)("div",{className:p,draggable:"false",children:i&&(0,f.jsx)("div",{className:m,onClick:function(){a&&o({id:t,player:r,count:n,exist:i})},draggable:"false",children:(0,f.jsx)("span",{children:d[n]})})})},m=i.memo(p),v="GameField_wrapper__vQ7pO",h="GameField_row__NuLkh",g=function(e){var t,n=e.field,r=e.move,i=(0,o.i)((function(e){return e.gameState})),s=null===(t=i.players.find((function(e){return e.player===i.mover})))||void 0===t?void 0:t.entity.playerEntity;return(0,f.jsx)("div",{className:v,children:n.map((function(e,t){return(0,f.jsx)("div",{className:h,children:e.map((function(e){return(0,f.jsx)(m,{id:e.id,count:e.count,player:e.player,exist:e.exist,isMover:(t=e.player,s===a.T.localPlayer&&!i.moveBlock&&i.mover===t&&i.gameStarted),move:r},e.id);var t}))},t)}))})},y="HeaderPanel_wrapper__C+g7W",_="HeaderPanel_content__H26-q",x="HeaderPanel_button__258y0",E=function(e){var t=e.showMenu;return(0,f.jsx)("div",{className:y,children:(0,f.jsx)("div",{className:_,children:(0,f.jsx)("button",{onClick:t,className:x,children:"Menu"})})})},b="Popup_mask__G9eqc",w="Popup_wrapper__iGwMR",C="Popup_content__LC1gO",S="Popup_main__qYsN9",N="Popup_title__PxX9-",j="Popup_button__jWlFu components_button__Oqs6L",k=n(7462),T=n(3366),P=n(4578);function A(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}var M=n(4164),O=!1,B=i.createContext(null),Z="unmounted",L="exited",R="entering",F="entered",I="exiting",D=function(e){function t(t,n){var r;r=e.call(this,t,n)||this;var i,a=n&&!n.isMounting?t.enter:t.appear;return r.appearStatus=null,t.in?a?(i=L,r.appearStatus=R):i=F:i=t.unmountOnExit||t.mountOnEnter?Z:L,r.state={status:i},r.nextCallback=null,r}(0,P.Z)(t,e),t.getDerivedStateFromProps=function(e,t){return e.in&&t.status===Z?{status:L}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?n!==R&&n!==F&&(t=R):n!==R&&n!==F||(t=I)}this.updateStatus(!1,t)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var e,t,n,r=this.props.timeout;return e=t=n=r,null!=r&&"number"!==typeof r&&(e=r.exit,t=r.enter,n=void 0!==r.appear?r.appear:t),{exit:e,enter:t,appear:n}},n.updateStatus=function(e,t){void 0===e&&(e=!1),null!==t?(this.cancelNextCallback(),t===R?this.performEnter(e):this.performExit()):this.props.unmountOnExit&&this.state.status===L&&this.setState({status:Z})},n.performEnter=function(e){var t=this,n=this.props.enter,r=this.context?this.context.isMounting:e,i=this.props.nodeRef?[r]:[M.findDOMNode(this),r],a=i[0],o=i[1],s=this.getTimeouts(),l=r?s.appear:s.enter;!e&&!n||O?this.safeSetState({status:F},(function(){t.props.onEntered(a)})):(this.props.onEnter(a,o),this.safeSetState({status:R},(function(){t.props.onEntering(a,o),t.onTransitionEnd(l,(function(){t.safeSetState({status:F},(function(){t.props.onEntered(a,o)}))}))})))},n.performExit=function(){var e=this,t=this.props.exit,n=this.getTimeouts(),r=this.props.nodeRef?void 0:M.findDOMNode(this);t&&!O?(this.props.onExit(r),this.safeSetState({status:I},(function(){e.props.onExiting(r),e.onTransitionEnd(n.exit,(function(){e.safeSetState({status:L},(function(){e.props.onExited(r)}))}))}))):this.safeSetState({status:L},(function(){e.props.onExited(r)}))},n.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},n.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,t.nextCallback=null,e(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},n.onTransitionEnd=function(e,t){this.setNextCallback(t);var n=this.props.nodeRef?this.props.nodeRef.current:M.findDOMNode(this),r=null==e&&!this.props.addEndListener;if(n&&!r){if(this.props.addEndListener){var i=this.props.nodeRef?[this.nextCallback]:[n,this.nextCallback],a=i[0],o=i[1];this.props.addEndListener(a,o)}null!=e&&setTimeout(this.nextCallback,e)}else setTimeout(this.nextCallback,0)},n.render=function(){var e=this.state.status;if(e===Z)return null;var t=this.props,n=t.children,r=(t.in,t.mountOnEnter,t.unmountOnExit,t.appear,t.enter,t.exit,t.timeout,t.addEndListener,t.onEnter,t.onEntering,t.onEntered,t.onExit,t.onExiting,t.onExited,t.nodeRef,(0,T.Z)(t,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return i.createElement(B.Provider,{value:null},"function"===typeof n?n(e,r):i.cloneElement(i.Children.only(n),r))},t}(i.Component);function G(){}D.contextType=B,D.propTypes={},D.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:G,onEntering:G,onEntered:G,onExit:G,onExiting:G,onExited:G},D.UNMOUNTED=Z,D.EXITED=L,D.ENTERING=R,D.ENTERED=F,D.EXITING=I;var U=D,V=function(e,t){return e&&t&&t.split(" ").forEach((function(t){return r=t,void((n=e).classList?n.classList.remove(r):"string"===typeof n.className?n.className=A(n.className,r):n.setAttribute("class",A(n.className&&n.className.baseVal||"",r)));var n,r}))},q=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).appliedClasses={appear:{},enter:{},exit:{}},t.onEnter=function(e,n){var r=t.resolveArguments(e,n),i=r[0],a=r[1];t.removeClasses(i,"exit"),t.addClass(i,a?"appear":"enter","base"),t.props.onEnter&&t.props.onEnter(e,n)},t.onEntering=function(e,n){var r=t.resolveArguments(e,n),i=r[0],a=r[1]?"appear":"enter";t.addClass(i,a,"active"),t.props.onEntering&&t.props.onEntering(e,n)},t.onEntered=function(e,n){var r=t.resolveArguments(e,n),i=r[0],a=r[1]?"appear":"enter";t.removeClasses(i,a),t.addClass(i,a,"done"),t.props.onEntered&&t.props.onEntered(e,n)},t.onExit=function(e){var n=t.resolveArguments(e)[0];t.removeClasses(n,"appear"),t.removeClasses(n,"enter"),t.addClass(n,"exit","base"),t.props.onExit&&t.props.onExit(e)},t.onExiting=function(e){var n=t.resolveArguments(e)[0];t.addClass(n,"exit","active"),t.props.onExiting&&t.props.onExiting(e)},t.onExited=function(e){var n=t.resolveArguments(e)[0];t.removeClasses(n,"exit"),t.addClass(n,"exit","done"),t.props.onExited&&t.props.onExited(e)},t.resolveArguments=function(e,n){return t.props.nodeRef?[t.props.nodeRef.current,e]:[e,n]},t.getClassNames=function(e){var n=t.props.classNames,r="string"===typeof n,i=r?""+(r&&n?n+"-":"")+e:n[e];return{baseClassName:i,activeClassName:r?i+"-active":n[e+"Active"],doneClassName:r?i+"-done":n[e+"Done"]}},t}(0,P.Z)(t,e);var n=t.prototype;return n.addClass=function(e,t,n){var r=this.getClassNames(t)[n+"ClassName"],i=this.getClassNames("enter").doneClassName;"appear"===t&&"done"===n&&i&&(r+=" "+i),"active"===n&&e&&e.scrollTop,r&&(this.appliedClasses[t][n]=r,function(e,t){e&&t&&t.split(" ").forEach((function(t){return r=t,void((n=e).classList?n.classList.add(r):function(e,t){return e.classList?!!t&&e.classList.contains(t):-1!==(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")}(n,r)||("string"===typeof n.className?n.className=n.className+" "+r:n.setAttribute("class",(n.className&&n.className.baseVal||"")+" "+r)));var n,r}))}(e,r))},n.removeClasses=function(e,t){var n=this.appliedClasses[t],r=n.base,i=n.active,a=n.done;this.appliedClasses[t]={},r&&V(e,r),i&&V(e,i),a&&V(e,a)},n.render=function(){var e=this.props,t=(e.classNames,(0,T.Z)(e,["classNames"]));return i.createElement(U,(0,k.Z)({},t,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},t}(i.Component);q.defaultProps={classNames:""},q.propTypes={};var J=q,X=n(7898),W=function(e){var t=e.show,n=e.timeout,r=void 0===n?X.UP:n,i=e.children;return(0,f.jsx)(J,{unmountOnExit:!0,in:t,timeout:r,classNames:"mask",children:(0,f.jsx)("div",{className:b,children:(0,f.jsx)(J,{in:t,timeout:r,classNames:"popup",children:i})})})},z=function(e){var t=e.show,n=e.title,r=e.text,i=e.callback,a=e.buttonText;return(0,f.jsx)(W,{show:t,children:(0,f.jsx)("div",{className:w,children:(0,f.jsxs)("div",{className:C,children:[(0,f.jsxs)("div",{className:S,children:[(0,f.jsx)("h2",{id:N,children:n}),r&&(0,f.jsx)("p",{children:r})]}),(0,f.jsx)("button",{className:j,onClick:function(){return i()},children:a||"Ok"})]})})})},H=n(1523),Y=function(e){var t=e.show,n=e.actions;return(0,f.jsx)(W,{show:t,children:(0,f.jsx)("div",{className:w,children:(0,f.jsxs)("div",{className:C,children:[(0,f.jsx)("h2",{children:"Pause"}),(0,f.jsx)("button",{className:j,onClick:n.continue,children:"Continue"}),(0,f.jsx)("button",{className:j,disabled:void 0===n.save,onClick:n.save,children:"Save"}),(0,f.jsx)(H.rU,{to:"/menu/play/load",className:j,children:"Load"}),(0,f.jsx)(H.rU,{to:"/menu/settings",className:j,children:"Settings"}),(0,f.jsx)("button",{className:j,disabled:void 0===n.reset,onClick:n.reset,children:"Reset"}),(0,f.jsx)(H.rU,{to:"/menu/",className:j,children:"Main menu"})]})})})},Q=n(3433),$=n(181);function K(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=(0,$.Z)(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}var ee=n(6625),te=n(6489);function ne(e,t){return e.filter((function(e){return e.count===t}))}function re(e,t){return Math.max.apply(Math,(0,Q.Z)(ie(e,t).map((function(e){return e.player!==t.player?e.count:0}))))}function ie(e,t){var n=(0,ee.r)(t.id),i=(0,r.Z)(n,2),a=i[0],o=i[1];return[(0,te.F)((function(){return e[a+1][o]})),(0,te.F)((function(){return e[a][o+1]})),(0,te.F)((function(){return e[a-1][o]})),(0,te.F)((function(){return e[a][o-1]}))].filter(Boolean)}function ae(e){if(Array.isArray(e))return e[Math.floor(Math.random()*e.length)];throw new Error("The argument is not an array.")}function oe(e){return ae(e)}function se(e){return ae(function(e){var t=e.reduce((function(e,t){return t.count>e?t.count:e}),0);return ne(e,t)}(e))}function le(e){return ne(e,3)}function ue(e,t){for(var n=t,r=function(r){if((n=t.filter((function(t){return function(e,t){return ie(e,t).reduce((function(e,t){return null===t.player?e+1:e}),0)}(e.field,t)===r}))).length)return"break"},i=4;i>0;i--){if("break"===r(i))break}return n}function ce(e,t){return t.filter((function(t){return 3!==re(e.field,t)}))}function fe(e,t){return t.filter((function(t){return 3===re(e.field,t)}))}function de(e,t){return t.filter((function(t){return function(e,t){return ie(e,t).reduce((function(e,n){return n.player!==t.player&&null!==n.player?e+1:e}),0)}(e.field,t)>0}))}var pe={getRandomBot:function(e){return ae(me.filter((function(t){return t.difficulty===e}))).name},getBotById:function(e){return me.find((function(t){return t.name===e}))},getBotMoveById:function(e,t){var n,r,i=null===(n=me.find((function(t){return t.name===e})))||void 0===n?void 0:n.implementation,a=function(e,t){var n,r=[],i=K(e);try{for(i.s();!(n=i.n()).done;){var a=n.value.filter((function(e){return e.player===t}));a.length>0&&(r=r.concat(a))}}catch(o){i.e(o)}finally{i.f()}return r}(t.field,t.gameState.mover);return i?r=i(t,a):(console.error("The requested bot implementation was not found. Random implementation will be chosen."),r=ae(me).implementation(t,a)),r||ae(a)}},me=[[{name:"a1",difficulty:"simple",description:"Random movement",implementation:function(e,t){return oe(t)}},{name:"a2",difficulty:"simple",description:"Three count priority mover",implementation:function(e,t){var n=le(t);if(n.length>0)return oe(n)}},{name:"a3",difficulty:"simple",description:"Expander & three point priority mover",implementation:function(e,t){var n=le(t);if(n.length>0)return oe(n);var r=ue(e,t);return r.length?oe(r):oe(t)}},{name:"a4",difficulty:"simple",description:"Accumulator, big Bang",implementation:function(e,t){var n=function(e){for(var t=1;t<3;t++){var n=ne(e,t);if(n.length>0)return n}return[]}(t);return n.length?oe(n):oe(t)}}],[{name:"b1",difficulty:"normal",description:"Priority for capturing enemy cells with three dots, if they are next to their own cells with three dots.",implementation:function(e,t){var n=le(t);if(n.length){var r=fe(e,n);if(r.length)return oe(r)}}},{name:"b2",difficulty:"normal",description:"",implementation:function(e,t){var n=le(t);if(n.length){var r=fe(e,n);return r.length?oe(r):oe(n)}}},{name:"b3",difficulty:"normal",description:"",implementation:function(e,t){var n=le(t);if(n.length){var r=fe(e,n);return r.length?oe(r):oe(n)}var i=ce(e,t);if(i.length)return oe(i)}},{name:"b4",difficulty:"normal",description:"",implementation:function(e,t){var n=le(t);if(n.length){var r=fe(e,n);if(r.length)return oe(r)}var i=ue(e,t);if(i.length)return oe(i)}},{name:"b5",difficulty:"normal",description:"Aggressive",implementation:function(e,t){var n=le(t);if(n.length){var r=fe(e,n);if(r.length)return oe(r)}var i=de(e,t);if(i.length)return se(i)}},{name:"b6",difficulty:"normal",description:"dontPickBattles & aggressive",implementation:function(e,t){var n=le(t);if(n.length){var r=fe(e,n);if(r.length)return oe(r)}var i=de(e,t);if(i.length){var a=ce(e,i);if(a.length)return se(a)}}},{name:"b7",difficulty:"normal",description:"dontPickBattles & aggressive",implementation:function(e,t){var n=le(t);if(n.length){var r=fe(e,n);if(r.length)return oe(r)}var i=de(e,t);if(i.length){var a=ce(e,i);if(a.length)return se(a)}var o=ue(e,t);if(o.length){var s=ce(e,o);if(s.length)return oe(s)}var l=ce(e,t);if(l.length)return se(l)}},{name:"b7",difficulty:"normal",description:"dontPickBattles & aggressive",implementation:function(e,t){var n=le(t);if(n.length){var r=fe(e,n);if(r.length)return oe(r)}var i=de(e,t);if(i.length){var a=ce(e,i);if(a.length)return se(a)}var o=ue(e,t);if(o.length){var s=ce(e,o);if(s.length)return oe(s)}var l=ce(e,t);if(l.length)return se(l)}}]].flat();var ve={wrapper:"ChosePlayerButton_wrapper__o1ooa",up:"ChosePlayerButton_up__Y6yf0 ChosePlayerButton_wrapper__o1ooa",down:"ChosePlayerButton_down__aSsRe ChosePlayerButton_wrapper__o1ooa",pointer:"ChosePlayerButton_pointer__CCo7k"},he=function(e){var t=e.player,n=e.entity,r=e.changeEntity,i=e.position;return(0,f.jsx)("div",{className:ve[i],children:(0,f.jsx)("button",{className:n!==a.T.empty?(0,c.U)(t):"",onClick:r,children:X.t4[n]})})},ge={content:"PlayersForm_content__NuCh9",row:"PlayersForm_row__O3qBq",button:"PlayersForm_button__xHo94",switch:"PlayersForm_switch__ARPel",leftSwitch:"PlayersForm_leftSwitch__zDBTw PlayersForm_switch__ARPel",rightSwitch:"PlayersForm_rightSwitch__M8cYc PlayersForm_switch__ARPel",startButton:"PlayersForm_startButton__WoV1+",pulse:"PlayersForm_pulse__-m0EO"},ye=n(1044);var _e=n(5104),xe=function(e){var t=e.onSubmit,n=e.templates,o=(0,i.useState)(0),s=(0,r.Z)(o,2),l=s[0],u=s[1],c=(0,i.useState)(y()),d=(0,r.Z)(c,2),p=d[0],m=d[1];(0,i.useEffect)((function(){m(y())}),[l]);var v=function(e){return e.filter((function(e){return e.entity.playerEntity!==a.T.empty}))};function h(e){var t=(l+e+n.length)%n.length;u(t)}function y(){var e;return(e=ye.j[l],Array.from(new Set(e.spawns.map((function(e){return e.player}))))).map((function(e){return{player:e,entity:{playerEntity:a.T.empty,id:""}}}))}function _(e){return function(){var t,n=(0,Q.Z)(p);n[e].entity.playerEntity=(t=n[e].entity.playerEntity,"string"===typeof a.T[t+1]?t+1:a.T.empty),m(n)}}return(0,f.jsx)("div",{className:ge.wrapper,children:(0,f.jsxs)("div",{className:ge.content,children:[(0,f.jsxs)("div",{className:ge.row,children:[(0,f.jsx)(he,{player:p[0].player,entity:p[0].entity.playerEntity,changeEntity:_(0),position:"up"},0),(0,f.jsx)(he,{player:p[1].player,entity:p[1].entity.playerEntity,changeEntity:_(1),position:"up"},1)]}),(0,f.jsx)("button",{className:ge.leftSwitch,onClick:function(){return h(-1)},children:"<"}),(0,f.jsx)("button",{className:ge.rightSwitch,onClick:function(){return h(1)},children:">"}),(0,f.jsx)(g,{field:(0,_e.O)(ye.j[l]),move:function(){}}),(0,f.jsxs)("div",{className:ge.row,children:[(0,f.jsx)(he,{player:p[3].player,entity:p[3].entity.playerEntity,changeEntity:_(3),position:"down"},3),(0,f.jsx)(he,{player:p[2].player,entity:p[2].entity.playerEntity,changeEntity:_(2),position:"down"},2)]}),(0,f.jsx)("button",{className:ge.startButton,onClick:function(){var e=v(p);e.length>1&&(e=function(e){return e.map((function(e){if(e.entity.playerEntity===a.T.android){var t=e;return t.entity.id=pe.getRandomBot("normal"),t}return e}))}(e),t({templateId:l,playersProfiles:e}))},children:v(p).length>1?"\u25b6":""})]})})},Ee=n(6030),be=n(3962),we=n(1749);function Ce(){var e=(0,we.B)().saveGame,t=(0,i.useState)(!1),n=(0,r.Z)(t,2),s=n[0],l=n[1],u=(0,i.useState)(setTimeout((function(){return 0}),0)),c=(0,r.Z)(u,2),f=c[0],d=c[1],p=(0,i.useState)(setTimeout((function(){return 0}),0)),m=(0,r.Z)(p,2),v=m[0],h=m[1],g=(0,Ee.I0)(),y=(0,o.i)((function(e){return e}));(0,i.useEffect)((function e(){if(s)return;if(!y.gameState.gameStarted||!y.gameState.moveBlock)return;var t=function(e){var t,n=K(e);try{for(n.s();!(t=n.n()).done;){var r=t.value.find((function(e){return e.count>3}));if(r)return r}}catch(i){n.e(i)}finally{n.f()}}(y.field);if(!t)return void g(be.Vc(y.field));g(be.LA(t));var n=setTimeout(e,y.settings.cellCloningDelay);return h(n),function(){return clearTimeout(v)}}),[y.gameState.gameStarted,y.gameState.moveBlock,s]),(0,i.useEffect)((function(){if(s)return;var e=y.gameState.players.find((function(e){return e.player===y.gameState.mover}));if((null===e||void 0===e?void 0:e.entity.playerEntity)!==a.T.android||y.gameState.moveBlock||!y.gameState.gameStarted)return;var t=pe.getBotMoveById(e.entity.id,y);if(!t)return void console.error("Can't get bot turn");if(y.settings.botMovingDelay){var n=setTimeout((function(){return _(t)}),y.settings.botMovingDelay);return d(n),function(){return clearTimeout(f)}}_(t)}),[y.gameState.moveNumber,y.gameState.gameStarted,s]);var _=(0,i.useCallback)((function(e){g(be.sU(e))}),[]),x=(0,i.useCallback)((function(){clearTimeout(f),clearTimeout(v),g(be.BM())}),[]),E=(0,i.useCallback)((function(e){return g(be.t(e))}),[]),b=(0,i.useCallback)((function(){return l(!0)}),[]),w=(0,i.useCallback)((function(){return l(!1)}),[]);return{playerMove:_,start:E,reset:x,save:function(){return e(y)},pause:b,continue:w}}var Se="GamePlay_wrapper__odTxx",Ne="GamePlay_content__JJXIO",je=function(){var e=(0,o.i)((function(e){return e})),t=(0,i.useState)(!1),n=(0,r.Z)(t,2),s=n[0],l=n[1],u=(0,i.useState)(!1),c=(0,r.Z)(u,2),d=c[0],p=c[1],m=(0,i.useState)("User win"),v=(0,r.Z)(m,2),h=v[0],y=v[1],_=Ce();function x(){b(),_.reset(),l(!1)}function b(){_.continue(),p(!1)}(0,i.useEffect)((function(){e.gameState.endGame&&(y("".concat(a.J[e.gameState.players[0].player],"\n                won in ").concat(e.gameState.moveNumber," moves")),l(!0))}),[e.gameState.endGame]);var w={continue:b,reset:e.gameState.gameStarted?x:void 0,save:e.gameState.gameStarted?function(){_.save(),b()}:void 0};return(0,f.jsxs)("div",{className:Se,children:[(0,f.jsx)(z,{show:s,title:h,buttonText:"Restart",callback:x}),(0,f.jsx)(Y,{show:d,actions:w}),(0,f.jsx)(E,{showMenu:function(){_.pause(),p(!0)}}),(0,f.jsx)("div",{className:Ne,children:e.gameState.gameStarted?(0,f.jsx)(g,{field:e.field,move:_.playerMove}):(0,f.jsx)(xe,{onSubmit:function(e){_.start(e)},templates:ye.j})})]})}},3962:function(e,t,n){n.d(t,{BM:function(){return a},I2:function(){return f},LA:function(){return s},Sl:function(){return c},Vc:function(){return l},sU:function(){return u},t:function(){return o},wc:function(){return i}});var r=n(6581),i=function(e){return{type:r.Z.LOAD_GAME,payload:e}},a=function(){return{type:r.Z.RESTART_GAME,payload:void 0}},o=function(e){return{type:r.Z.START_GAME,payload:e}},s=function(e){return{type:r.Z.CELL_CLONING,payload:e}},l=function(e){return{type:r.Z.NEXT_MOVE,payload:e}},u=function(e){return{type:r.Z.PLAYER_MOVE,payload:e}},c=function(){return{type:r.X.RESET_TO_DEFAULT,payload:void 0}},f=function(e){return{type:r.X.SET_SETTING,payload:e}}},322:function(e,t,n){n.d(t,{U:function(){return o}});var r=n(2386),i={"red-low":"colorClasses_red-low__4GUzW","red-medium":"colorClasses_red-medium__vzSgD","red-high":"colorClasses_red-high__yaGu7","red-overflow":"colorClasses_red-overflow__DJN01","orange-low":"colorClasses_orange-low__Nr5E1","orange-medium":"colorClasses_orange-medium__GQCk-","orange-high":"colorClasses_orange-high__2mgMW","orange-overflow":"colorClasses_orange-overflow__y9aeV","green-low":"colorClasses_green-low__L6UJy","green-medium":"colorClasses_green-medium__2dbQb","green-high":"colorClasses_green-high__b+j1C","green-overflow":"colorClasses_green-overflow__7F9-L","blue-low":"colorClasses_blue-low__qIMDU","blue-medium":"colorClasses_blue-medium__8vlNg","blue-high":"colorClasses_blue-high__iZqTX","blue-overflow":"colorClasses_blue-overflow__S0BdD"},a=["","low","medium","high","overflow","overflow"];function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,n=a[t];return n?i["".concat(r.J[e],"-").concat(n)]:i[r.J[e]]}},7477:function(e,t,n){var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=n(2791);t.default=function(e,t,n){var a=i.useMemo((function(){return r({serializer:JSON.stringify,parser:JSON.parse,logger:console.log,syncData:!0},n)}),[n]),o=a.serializer,s=a.parser,l=a.logger,u=a.syncData,c=i.useState((function(){if("undefined"===typeof window)return t;try{var n=window.localStorage.getItem(e);return n?s(n):t}catch(r){return l(r),t}})),f=c[0],d=c[1];return i.useEffect((function(){if("undefined"!==typeof window){try{void 0!==f?window.localStorage.setItem(e,o(f)):window.localStorage.removeItem(e)}catch(t){l(t)}}}),[f]),i.useEffect((function(){if(u){var t=function(t){if(t.key===e&&t.storageArea===window.localStorage)try{d(t.newValue?s(t.newValue):void 0)}catch(t){l(t)}};if("undefined"!==typeof window)return window.addEventListener("storage",t),function(){return window.removeEventListener("storage",t)}}}),[e,u]),[f,d]}},9199:function(e,t,n){function r(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}n.d(t,{Z:function(){return r}})},3433:function(e,t,n){n.d(t,{Z:function(){return o}});var r=n(907);var i=n(9199),a=n(181);function o(e){return function(e){if(Array.isArray(e))return(0,r.Z)(e)}(e)||(0,i.Z)(e)||(0,a.Z)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}}}]);
//# sourceMappingURL=650.d443c808.chunk.js.map