(this.webpackJsonppoints=this.webpackJsonppoints||[]).push([[0],[,,,,,,,,,,function(e,t,r){e.exports={wrapper:"PlayersForm_wrapper__TTHCu",content:"PlayersForm_content__333GC",row:"PlayersForm_row__4M82w",button:"PlayersForm_button__sU6Gu"}},,function(e,t,r){e.exports={wrapper:"CellItem_wrapper__1rAJ5",content:"CellItem_content__2DAMM",none:"CellItem_none__574jH",red:"CellItem_red__3g3TO",orange:"CellItem_orange__2j7Hc",yellow:"CellItem_yellow__3uxu3",green:"CellItem_green__VEVs5",blue:"CellItem_blue__3zDKo",mover:"CellItem_mover__RdWp7"}},function(e,t,r){e.exports={mask:"Popup_mask__17XTj",wrapper:"Popup_wrapper__2JNVu",content:"Popup_content__1ynAw",main:"Popup_main__1NpXR"}},,function(e,t,r){e.exports={wrapper:"GameField_wrapper__2kRGf",content:"GameField_content__1_Sxb",row:"GameField_row__3HD1i"}},function(e,t,r){e.exports={wrapper:"ChosePlayerButton_wrapper__2Y62w",content:"ChosePlayerButton_content__158zQ",up:"ChosePlayerButton_up__2emgR",go:"ChosePlayerButton_go__20d8A",down:"ChosePlayerButton_down__IsGxp"}},,,,,,function(e,t,r){e.exports={none:"colors_none__DDh7w",red:"colors_red__2u9cS",orange:"colors_orange__AzVyP",yellow:"colors_yellow__39TPi",green:"colors_green__19aDX",blue:"colors_blue__AzYQz"}},,,,,,,function(e,t,r){},,,,function(e,t,r){},,function(e,t,r){},function(e,t,r){"use strict";r.r(t);var n={};r.r(n),r.d(n,"c1",(function(){return T})),r.d(n,"c3",(function(){return k})),r.d(n,"c2",(function(){return R})),r.d(n,"c4",(function(){return G}));var a={};r.r(a),r.d(a,"b1",(function(){return F})),r.d(a,"b2",(function(){return I}));var o,c,l=r(0),u=r(6),i=r.n(u),s=(r(29),r(2)),m=r(3),p=r(9),f=p.c,d=(r(33),r(12)),b=r.n(d);!function(e){e[e.red=0]="red",e[e.orange=1]="orange",e[e.yellow=2]="yellow",e[e.green=3]="green",e[e.blue=4]="blue"}(o||(o={})),function(e){e[e.none=0]="none",e[e.user=1]="user",e[e.android=2]="android"}(c||(c={}));var j=r(22),y=r.n(j),O=r(7),_=r(21),v=function(e){var t,r=Object(_.a)(e);try{for(r.s();!(t=r.n()).done;){var n=t.value.find((function(e){return e.count>3}));if(n)return n}}catch(a){r.e(a)}finally{r.f()}},g=function(e,t){var r,n=[],a=Object(_.a)(e);try{for(a.s();!(r=a.n()).done;){var o=r.value.filter((function(e){return e.player===t}));o.length>0&&(n=n.concat(o))}}catch(c){a.e(c)}finally{a.f()}return n},h=function(e){return[Math.floor(e/B.template.size[0]),e%B.template.size[0]]},x=function(e,t){return M(e,t).reduce((function(e,t){return null===t.player?e+1:e}),0)},E=function(e,t){return Math.max.apply(Math,Object(O.a)(M(e,t).map((function(e){return e.player!==t.player?e.count:0}))))},w={cell:function(e){return{id:e,count:0,player:null,allow:!0}},emptyCell:function(e){return{id:e,count:0,player:null,allow:!1}},field:function(e){return new Array(e[1]).fill(1).map((function(t,r){return new Array(e[0]).fill(1).map((function(t,n){return w.cell(r*e[0]+n)}))}))},spawnPoint:function(e,t){var r=e;return t.forEach((function(e){r[e.y][e.x].player=e.player,r[e.y][e.x].count=3})),r},fieldByTemplate:function(e){for(var t=Object(m.a)(e.size,2),r=t[0],n=t[1],a=w.field(e.size),o=0;o<r;o++)for(var c=0;c<n;c++)e.field[o][c]?a[o][c]=w.cell(o*r+c):a[o][c]=w.emptyCell(o*r+c);return a}},S=function(e,t){return e.some((function(e){return!!e.some((function(e){return e.player===t}))}))},N={elemetFrom:function(e){if(Array.isArray(e))return e[Math.floor(Math.random()*e.length)];if(Object.prototype.toString.call(e))return e[N.elemetFrom(Object.keys(e))];throw new Error("The argument is not an array or object.")}},C=function(e,t){return e.filter((function(e){return e.count===t}))};function A(e,t){try{return e()}catch(r){return t}}function M(e,t){var r=h(t.id),n=Object(m.a)(r,2),a=n[0],o=n[1];return[A((function(){return e[a+1][o]}),null),A((function(){return e[a][o+1]}),null),A((function(){return e[a-1][o]}),null),A((function(){return e[a][o-1]}),null)].filter((function(e){return e}))}function L(e,t){var r=Object(m.a)(t,2),n=r[0],a=r[1];return!!A((function(){return e[n][a].allow}),void 0)}var T=function(e){var t=g(e.field,e.gameState.mover);return N.elemetFrom(t)},k=function(e){var t=g(e.field,e.gameState.mover),r=C(t,3);return r.length>0?N.elemetFrom(r):N.elemetFrom(t)},R=function(e){var t=g(e.field,e.gameState.mover),r=C(t,3);r.length>0&&(t=r);for(var n=function(r){if(t.some((function(t){return x(e.field,t)===r})))return t=t.filter((function(t){return x(e.field,t)===r})),"break"},a=4;a>0;a--){if("break"===n(a))break}return N.elemetFrom(t)},G=function(e){for(var t=g(e.field,e.gameState.mover),r=1;r<3;r++){var n=C(t,r);if(n.length>0)return N.elemetFrom(n)}return N.elemetFrom(t)},F=function(e){var t=g(e.field,e.gameState.mover),r=C(t,3);return(r=r.filter((function(t){return 3===E(e.field,t)}))).length>0?N.elemetFrom(r):N.elemetFrom(t)},I=function(e){var t=g(e.field,e.gameState.mover),r=C(t,3);return(r=r.filter((function(t){return 3===E(e.field,t)?1:0}))).length>0||(r=C(t,3)).length>0?N.elemetFrom(r):N.elemetFrom(t)},P=function(e){switch(e){case"simple":return N.elemetFrom(n);case"normal":return N.elemetFrom(a);default:return}},B={template:[{size:[9,9],field:[[1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1]],spawns:[{x:1,y:1,player:o.red},{x:7,y:1,player:o.orange},{x:1,y:7,player:o.blue},{x:7,y:7,player:o.green}]},{size:[9,9],field:[[0,0,0,0,0,0,0,0,0],[0,1,1,1,1,1,1,1,0],[0,1,1,1,1,1,1,1,0],[0,1,1,1,1,1,1,1,0],[0,1,1,1,1,1,1,1,0],[0,1,1,1,1,1,1,1,0],[0,1,1,1,1,1,1,1,0],[0,1,1,1,1,1,1,1,0],[0,0,0,0,0,0,0,0,0]],spawns:[{x:2,y:2,player:o.red},{x:6,y:2,player:o.orange},{x:2,y:6,player:o.blue},{x:6,y:6,player:o.green}]},{size:[9,9],field:[[0,1,1,1,1,1,1,1,0],[1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1],[1,1,1,0,0,0,1,1,1],[1,1,1,0,0,0,1,1,1],[1,1,1,0,0,0,1,1,1],[1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1],[0,1,1,1,1,1,1,1,0]],spawns:[{x:1,y:1,player:o.red},{x:7,y:1,player:o.orange},{x:1,y:7,player:o.blue},{x:7,y:7,player:o.green}]},{size:[9,9],field:[[1,1,1,1,0,1,1,1,1],[1,1,1,1,0,1,1,1,1],[1,1,1,1,0,1,1,1,1],[1,1,1,1,1,1,1,1,1],[0,0,0,1,1,1,0,0,0],[1,1,1,1,1,1,1,1,1],[1,1,1,1,0,1,1,1,1],[1,1,1,1,0,1,1,1,1],[1,1,1,1,0,1,1,1,1]],spawns:[{x:1,y:1,player:o.red},{x:7,y:1,player:o.orange},{x:1,y:7,player:o.blue},{x:7,y:7,player:o.green}]},{size:[9,9],field:[[1,1,1,1,0,1,1,1,1],[1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1],[1,1,1,1,0,1,1,1,1],[0,1,1,0,0,0,1,1,0],[1,1,1,1,0,1,1,1,1],[1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1],[1,1,1,1,0,1,1,1,1]],spawns:[{x:1,y:1,player:o.red},{x:7,y:1,player:o.orange},{x:1,y:7,player:o.blue},{x:7,y:7,player:o.green}]},{size:[9,9],field:[[1,1,1,1,0,1,1,1,1],[1,1,1,1,0,1,1,1,1],[1,1,1,1,0,1,1,1,1],[1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1],[1,1,1,1,0,1,1,1,1],[1,1,1,1,0,1,1,1,1],[1,1,1,1,0,1,1,1,1]],spawns:[{x:1,y:1,player:o.red},{x:7,y:1,player:o.orange},{x:1,y:7,player:o.blue},{x:7,y:7,player:o.green}]}][0],playersProfiles:[],bots:{red:P(N.elemetFrom(["normal","simple"])),orange:P(N.elemetFrom(["normal","simple"])),green:P(N.elemetFrom(["normal","simple"])),blue:P(N.elemetFrom(["normal","simple"]))}};function V(e){return y.a[o[e]]}var z,W=r(1),D=function(e){var t=e.cell,r=e.onMove,n=f((function(e){return e.gameState}));return 0===t.count&&b.a.wrapper,Object(W.jsx)("div",{className:[b.a.wrapper,n.mover!==t.player||n.moveBlock?"":b.a.mover].join(" "),draggable:"false",children:t.allow&&Object(W.jsx)("div",{className:[b.a.content,V(t.player)].join(" "),onClick:r&&function(){return r(t)},draggable:"false",children:Object(W.jsx)("span",{children:function(e){switch(e){case 0:return"";case 1:return Object(W.jsx)(W.Fragment,{children:"\u2022"});case 2:return Object(W.jsx)(W.Fragment,{children:"\u2022\xa0\u2022"});case 3:return Object(W.jsxs)(W.Fragment,{children:["\u2022",Object(W.jsx)("br",{}),"\u2022\xa0\u2022"]});case 4:return Object(W.jsxs)(W.Fragment,{children:["\u2022\xa0\u2022",Object(W.jsx)("br",{}),"\u2022\xa0\u2022"]});case 5:return Object(W.jsxs)(W.Fragment,{children:["\u2022\xa0\u2022",Object(W.jsx)("br",{}),"\u2022",Object(W.jsx)("br",{}),"\u2022\xa0\u2022"]});default:return""}}(t.count)})})})},Y=r(15),U=r.n(Y),X=function(e){var t=e.field,r=e.onMove;return Object(W.jsx)("div",{className:U.a.wrapper,children:Object(W.jsx)("div",{className:U.a.content,children:t.map((function(e){return Object(W.jsx)("div",{className:U.a.row,children:e.map((function(e){return Object(W.jsx)(D,{cell:e,onMove:r},e.id)}))},Math.random())}))})})},H=r(13),J=r.n(H),K=r(38),Z=(r(35),function(e){var t=e.show,r=e.title,n=e.text,a=e.callback,o=e.buttonText;return Object(W.jsx)(K.a,{unmountOnExit:!0,in:t,timeout:500,classNames:"mask",children:Object(W.jsx)("div",{className:J.a.mask,children:Object(W.jsx)(K.a,{in:t,timeout:500,classNames:"popup",children:Object(W.jsx)("div",{className:J.a.wrapper,children:Object(W.jsxs)("div",{className:J.a.content,children:[Object(W.jsxs)("div",{className:J.a.main,children:[Object(W.jsx)("h2",{children:r}),n&&Object(W.jsx)("p",{children:n})]}),Object(W.jsx)("button",{className:"btn",onClick:function(){return a()},children:o||"Ok"})]})})})})})});!function(e){e.CELL_CAPTURE="CELL_CAPTURE",e.CELL_INCREMENT="CELL_INCREMENT",e.CELL_ZEROING="CELL_ZEROING",e.CELL_CLONING="CELL_CLONING",e.NEW_MOVE="NEW_MOVE",e.BLOCK_MOVING="BLOCK_MOVING",e.ALLOW_MOVING="ALLOW_MOVING",e.NEXT_MOVER="NEXT_MOVER",e.START_GAME="START_GAME",e.RESTART_GAME="RESTART_GAME",e.PLAYER_MOVE="PLAYER_MOVE"}(z||(z={}));var Q=function(){return{type:z.RESTART_GAME,payload:void 0}},q=function e(t,r){var n,a=v(t);a?(r((n=a,{type:z.CELL_CLONING,payload:n})),setTimeout((function(){return e(t,r)}),0)):r(function(e){return{type:z.NEW_MOVE,payload:e}}(t))};function $(e){var t;return null===(t=B.playersProfiles.find((function(t){return t.player===e})))||void 0===t?void 0:t.status}var ee=r(16),te=r.n(ee),re=function(e){var t=e.player,r=e.playerStatus,n=e.position,a=Object(O.a)(r),o=a[0],l=a[1];return Object(W.jsx)("div",{className:[te.a[n],te.a.wrapper].join(" "),children:Object(W.jsx)("button",{className:[te.a.content,o!==c.none?V(t):""].join(" "),onClick:function(){return"string"===typeof c[o+1]?l(o+1):l(c.none)},children:function(){switch(o){case c.none:return"?";case c.user:return"\ud83d\ude42";default:return"\ud83e\udd16"}}()})})},ne=r(10),ae=r.n(ne),oe=function(e){var t=e.onSubmit,r=e.form,n=e.children,a=[];return a.push(Object(l.useState)(c.none)),a.push(Object(l.useState)(c.none)),a.push(Object(l.useState)(c.none)),a.push(Object(l.useState)(c.none)),Object(W.jsx)("div",{className:ae.a.wrapper,children:Object(W.jsxs)("div",{className:ae.a.content,children:[Object(W.jsxs)("div",{className:ae.a.row,children:[Object(W.jsx)(re,{player:r[0].player,playerStatus:a[0],position:"up"},0),Object(W.jsx)(re,{player:r[1].player,playerStatus:a[1],position:"up"},1)]}),n,Object(W.jsxs)("div",{className:ae.a.row,children:[Object(W.jsx)(re,{player:r[2].player,playerStatus:a[2],position:"down"},2),Object(W.jsx)(re,{player:r[3].player,playerStatus:a[3],position:"down"},3)]}),Object(W.jsx)("button",{className:["btn ",ae.a.button].join(" "),onClick:function(){a.filter((function(e){return e[0]!==c.none})).length>1&&t(r.map((function(e,t){return Object(s.a)(Object(s.a)({},r[t]),{},{status:a[t][0]})})))},children:"Start!"})]})})},ce=function(e){return w.spawnPoint(w.fieldByTemplate(e),e.spawns)};function le(e,t){if(!e.length)return e;var r=h(t.cellId),n=Object(m.a)(r,2),a=n[0],o=n[1],c=Array.from(e);return c[a][o]=Object(s.a)(Object(s.a)({},e[a][o]),{},{player:t.player}),c}function ue(e,t){if(!e.length)return e;var r=Array.from(e),n=h(t),a=Object(m.a)(n,2),o=a[0],c=a[1];return r[o][c]=Object(s.a)(Object(s.a)({},e[o][c]),{},{count:r[o][c].count+1}),r}function ie(e,t){if(!e.length)return e;var r=Array.from(e),n=h(t),a=Object(m.a)(n,2),o=a[0],c=a[1];return r[o][c]=Object(s.a)(Object(s.a)({},e[o][c]),{},{count:0,player:null}),r}function se(e,t){if(!e.length)return e;var r=Array.from(e),n=t.payload,a=h(n.id),o=Object(m.a)(a,2),c=o[0],l=o[1];return 5===n.count?r[c][l]=Object(s.a)(Object(s.a)({},r[c][l]),{},{count:1}):r[c][l]=Object(s.a)(Object(s.a)({},r[c][l]),{},{count:0,player:null}),L(r,[c+1,l])&&(r[c+1][l]=me(r[c+1][l],n.player)),L(r,[c,l+1])&&(r[c][l+1]=me(r[c][l+1],n.player)),L(r,[c-1,l])&&(r[c-1][l]=me(r[c-1][l],n.player)),L(r,[c,l-1])&&(r[c][l-1]=me(r[c][l-1],n.player)),r}var me=function(e,t){return Object(s.a)(Object(s.a)({},e),{},{player:t,count:e.count+1})};var pe=function(){var e=Object(p.b)(),t=Object(l.useState)(!1),r=Object(m.a)(t,2),n=r[0],a=r[1],u=f((function(e){return e})),i=Object(l.useState)(setTimeout((function(){return 0}),0)),d=Object(m.a)(i,2),b=d[0],j=d[1],y=Object(l.useState)("User win"),O=Object(m.a)(y,2),_=O[0],v=O[1],g=Object(l.useState)({red:0,orange:0,green:0,blue:0}),h=Object(m.a)(g,2),x=h[0],E=h[1];function w(t){var r;t&&u.gameState.gameStarted&&!u.gameState.moveBlock&&u.gameState.mover===t.player&&e((r=t,{type:z.PLAYER_MOVE,payload:r}))}return Object(l.useEffect)((function(){u.gameState.gameStarted&&u.gameState.moveBlock&&q(u.field,e)}),[u.gameState.gameStarted,u.gameState.moveBlock]),Object(l.useEffect)((function(){j(setTimeout((function(){return w(function(e){if(!e.gameState.moveBlock&&e.gameState.gameStarted){var t=B.bots;switch(e.gameState.mover){case o.red:if($(o.red)===c.android)return t.red(e);break;case o.orange:if($(o.orange)===c.android)return t.orange(e);break;case o.green:if($(o.green)===c.android)return t.green(e);break;case o.blue:if($(o.blue)===c.android)return t.blue(e)}}}(u))}),0))}),[u.gameState.moveNumber,u.gameState.gameStarted]),Object(l.useEffect)((function(){if(u.gameState.endGame){var e=Object(s.a)({},x);switch(u.gameState.mover){case o.red:e.red++;break;case o.orange:e.orange++;break;case o.green:e.green++;break;case o.blue:e.blue++}E(e),v("".concat((t=o[u.gameState.players[0]],t[0].toUpperCase()+t.slice(1,t.length)),"\n                \u043e\u0434\u0435\u0440\u0436\u0430\u043b \u043f\u043e\u0431\u0435\u0434\u0443 \u0437\u0430 ").concat(u.gameState.moveNumber," \u0445\u043e\u0434\u043e\u0432")),a(!0)}var t}),[u.gameState.endGame]),Object(W.jsx)("div",{className:"App",children:Object(W.jsxs)("div",{className:"App__content",children:[Object(W.jsx)(Z,{show:n,title:_,buttonText:"Restart",callback:function(){return clearTimeout(b),a(!1),void e(Q())}}),u.gameState.gameStarted?Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(X,{field:u.field,onMove:w}),Object(W.jsx)("button",{className:"btn",onClick:function(){e(Q())},children:"Restart"})]}):Object(W.jsx)(oe,{onSubmit:function(t){var r,n=B.template.spawns.filter((function(e,r){return t[r].status!==c.none}));B.playersProfiles=t,e((r=Object(s.a)(Object(s.a)({},B.template),{},{spawns:n}),{type:z.START_GAME,payload:r}))},form:B.template.spawns.map((function(e){return{player:e.player,status:c.none}})),children:Object(W.jsx)(X,{field:ce(B.template),onMove:function(){}})})]})})},fe=r(14),de=r(23);function be(e,t){var r=Object(O.a)(e.players).filter((function(e){return S(t,e)})),n=r.indexOf(e.mover),a=r[n+1<r.length?n+1:0];return Object(s.a)(Object(s.a)({},e),{},{mover:a,players:r})}function je(e,t){if(e.moveBlock&&e.gameStarted&&!e.endGame){var r=Object(s.a)(Object(s.a)({},be(e,t)),{},{moveNumber:e.moveNumber+1,moveBlock:!1});return 1===r.players.length&&(r.endGame=!0,r.moveBlock=!0),r}return e}function ye(e,t){var r=t.spawns.map((function(e){return e.player}));return Object(s.a)(Object(s.a)({},e),{},{moveBlock:!1,gameStarted:!0,mover:r[0],players:r})}var Oe=Object(fe.combineReducers)({field:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case z.START_GAME:return t.payload?ce(t.payload):[];case z.CELL_CAPTURE:return le(e,t.payload);case z.CELL_INCREMENT:return ue(e,t.payload);case z.CELL_ZEROING:return ie(e,t.payload);case z.CELL_CLONING:return se(e,t);case z.PLAYER_MOVE:return ue(e,t.payload.id);case z.RESTART_GAME:return[];default:return e}},gameState:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{gameStarted:!1,moveBlock:!0,endGame:!1,mover:0,moveNumber:0,players:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case z.BLOCK_MOVING:return Object(s.a)(Object(s.a)({},e),{},{moveBlock:!0});case z.ALLOW_MOVING:return Object(s.a)(Object(s.a)({},e),{},{moveBlock:!1,moveNumber:e.moveNumber+1});case z.NEW_MOVE:return je(e,t.payload);case z.NEXT_MOVER:return be(e,t.payload);case z.PLAYER_MOVE:return Object(s.a)(Object(s.a)({},e),{},{moveBlock:!0});case z.START_GAME:return ye(e,t.payload);case z.RESTART_GAME:return{gameStarted:!1,moveBlock:!0,endGame:!1,mover:0,moveNumber:0,players:[]};default:return e}}}),_e=Object(fe.createStore)(Oe,Object(de.composeWithDevTools)());i.a.render(Object(W.jsx)(p.a,{store:_e,children:Object(W.jsx)(pe,{})}),document.getElementById("root"))}],[[36,1,2]]]);
//# sourceMappingURL=main.a6708bc9.chunk.js.map