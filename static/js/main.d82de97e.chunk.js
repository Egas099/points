(this.webpackJsonppoints=this.webpackJsonppoints||[]).push([[0],{10:function(e,n,r){e.exports={wrapper:"GameField_wrapper__2CTQv",content:"GameField_content__1KzUx",row:"GameField_row__3MZHc"}},2:function(e,n,r){e.exports={wrapper:"CellItem_wrapper__1__Uv",content:"CellItem_content__39sOt",none:"CellItem_none__rZh4b",red:"CellItem_red__2okIZ",orange:"CellItem_orange__2RM0N",yellow:"CellItem_yellow__1S6xu",green:"CellItem_green__2RAp7",blue:"CellItem_blue__2JvrQ",mover:"CellItem_mover__Kw84x"}},21:function(e,n,r){},27:function(e,n,r){},28:function(e,n,r){"use strict";r.r(n);var t,a=r(0),c=r(8),l=r.n(c),o=(r(21),r(4)),i=o.c,u=r(16),d=r(6),s=r(3);!function(e){e[e.red=0]="red",e[e.orange=1]="orange",e[e.yellow=2]="yellow",e[e.green=3]="green",e[e.blue=4]="blue"}(t||(t={}));var f,p=[{x:1,y:1,player:t.red},{x:6,y:1,player:t.orange},{x:6,y:6,player:t.green},{x:1,y:6,player:t.blue}],O={x:8,y:8},j=r(14),_=function e(n,r){var t=b(n.field);t?(y(n,r,t),setTimeout((function(){return e(n,r)}),0)):(r(R()),r(w()))},b=function(e){var n,r=Object(j.a)(e);try{for(r.s();!(n=r.n()).done;){var t=n.value.find((function(e){return e.count>3}));if(t)return t}}catch(a){r.e(a)}finally{r.f()}},y=function(e,n,r){var t=r.player,a=m(r.id),c=Object(d.a)(a,2),l=c[0],o=c[1],i=r.count;n(g(e.field[o][l].id)),5===i&&v(n,e.field[o][l].id,t),o+1<O.y&&v(n,e.field[o+1][l].id,t),l+1<O.x&&v(n,e.field[o][l+1].id,t),o-1>=0&&v(n,e.field[o-1][l].id,t),l-1>=0&&v(n,e.field[o][l-1].id,t)},v=function(e,n,r){e(I({cellId:n,player:r})),e(N(n))},m=function(e){return[e%10,Math.floor(e/10)]},E=function(e,n){var r,t=Object(j.a)(e);try{for(t.s();!(r=t.n()).done;){if(r.value.find((function(e){return e.player===n})))return!0}}catch(a){t.e(a)}finally{t.f()}return!1},x=function(e){return{id:e,count:0,player:void 0}},C=function(e,n){var r=e;return n.forEach((function(e){r[e.y][e.x].player=e.player,r[e.y][e.x].count=3})),r};!function(e){e.CELL_CAPTURE="CELL_CAPTURE",e.CELL_INCREMENT="CELL_INCREMENT",e.CELL_ZEROING="CELL_ZEROING",e.BLOCK_MOVING="BLOCK_MOVING",e.ALLOW_MOVING="ALLOW_MOVING",e.NEXT_MOVER="NEXT_MOVER",e.RESTART_GAME="RESTART_GAME"}(f||(f={}));var L=function(){return{field:C((e=O,new Array(e.y).fill(1).map((function(n,r){return new Array(e.x).fill(1).map((function(e,n){return x(10*r+n)}))}))),p),mover:t.red,moveBlock:!1,players:h()};var e},h=function(){return[t.red,t.orange,t.yellow,t.green,t.blue]};var N=function(e){return{type:f.CELL_INCREMENT,payload:e}},g=function(e){return{type:f.CELL_ZEROING,payload:e}},I=function(e){return{type:f.CELL_CAPTURE,payload:e}},R=function(){return{type:f.NEXT_MOVER,payload:void 0}},w=function(){return{type:f.ALLOW_MOVING,payload:void 0}};function M(e,n){var r=Object(s.a)({},e),t=m(n.payload.cellId),a=Object(d.a)(t,2),c=a[0],l=a[1];return r.field[l][c].player=n.payload.player,r}function T(e,n){var r=Object(s.a)({},e),t=m(n.payload),a=Object(d.a)(t,2),c=a[0],l=a[1];return r.field[l][c].count+=1,r}function A(e,n){var r=Object(s.a)({},e),t=m(n.payload),a=Object(d.a)(t,2),c=a[0],l=a[1];return r.field[l][c].count=0,r.field[l][c].player=void 0,r}function G(e,n){for(var r=Object(u.a)(e.players),t=r.indexOf(e.mover),a=r[t+1]?r[t+1]:0;r.length>1&&!E(e.field,a);)t=r.indexOf(e.mover),r.splice(r.indexOf(a),1),a=r[t+1]?r[t+1]:0;return Object(s.a)(Object(s.a)({},e),{},{mover:a,players:r})}var k=r(2),B=r.n(k),V=r(1),Z=function(e){var n=e.cell,r=Object(o.b)(),a=i((function(e){return e.game}));return Object(V.jsx)("div",{className:[B.a.wrapper,a.mover!==n.player||a.moveBlock?"":B.a.mover].join(" "),draggable:"false",children:Object(V.jsx)("div",{className:[B.a.content,function(e){switch(e){case void 0:return B.a.none;case t.red:return B.a.red;case t.orange:return B.a.orange;case t.yellow:return B.a.yellow;case t.green:return B.a.green;case t.blue:return B.a.blue;default:return""}}(n.player)].join(" "),onClick:function(){a.moveBlock||a.mover===n.player&&(r(N(n.id)),r({type:f.BLOCK_MOVING,payload:void 0}))},draggable:"false",children:Object(V.jsx)("p",{children:function(e){switch(e){case 0:return"";case 3:return Object(V.jsxs)(V.Fragment,{children:[Object(V.jsx)("span",{children:"\u2022"}),Object(V.jsx)("br",{}),Object(V.jsx)("span",{children:"\u2022"}),Object(V.jsx)("span",{children:"\u2022"})]});case 4:return Object(V.jsxs)(V.Fragment,{children:[Object(V.jsx)("span",{children:"\u2022"}),Object(V.jsx)("span",{children:"\u2022"}),Object(V.jsx)("br",{}),Object(V.jsx)("span",{children:"\u2022"}),Object(V.jsx)("span",{children:"\u2022"})]});default:return new Array(e).fill(" \u2022 ").join(" ")}}(n.count)})})})},K=r(10),S=r.n(K),U=function(e){var n=e.field;return Object(V.jsx)("div",{className:S.a.wrapper,children:Object(V.jsx)("div",{className:S.a.content,children:n.map((function(e){return Object(V.jsx)("div",{className:S.a.row,children:e.map((function(e){return Object(V.jsx)(Z,{cell:e},e.id)}))},Math.random())}))})})};r(27);var F=function(){var e=Object(o.b)(),n=i((function(e){return e.game}));return Object(a.useEffect)((function(){n.moveBlock&&_(n,e)}),[n.moveBlock]),Object(V.jsx)("div",{className:"App",children:Object(V.jsxs)("div",{className:"App__content",children:[Object(V.jsx)(U,{field:n.field}),Object(V.jsx)("button",{onClick:function(){return e({type:f.RESTART_GAME,payload:void 0})},children:"Restart"})]})})},W=r(9),P=r(15),X=Object(W.combineReducers)({game:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L(),n=arguments.length>1?arguments[1]:void 0;switch(n.type){case f.CELL_CAPTURE:return M(e,n);case f.CELL_INCREMENT:return T(e,n);case f.CELL_ZEROING:return A(e,n);case f.BLOCK_MOVING:return Object(s.a)(Object(s.a)({},e),{},{moveBlock:!0});case f.ALLOW_MOVING:return Object(s.a)(Object(s.a)({},e),{},{moveBlock:!1});case f.NEXT_MOVER:return G(e,n);case f.RESTART_GAME:return L();default:return e}}}),J=Object(W.createStore)(X,Object(P.composeWithDevTools)());l.a.render(Object(V.jsx)(o.a,{store:J,children:Object(V.jsx)(F,{})}),document.getElementById("root"))}},[[28,1,2]]]);
//# sourceMappingURL=main.d82de97e.chunk.js.map