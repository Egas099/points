{"version":3,"file":"static/js/58.a7c9ad38.chunk.js","mappings":"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","sources":["hooks/useSaves.ts","webpack://points-client/./src/components/SavesList/SavesList.module.css?477d","components/SavesList/SavesList.tsx","webpack://points-client/./src/pages/MainMenu/Loading/MainMenuLoad.module.css?eb38","pages/MainMenu/Loading/MainMenuLoad.tsx","store/actionCreator.ts","../node_modules/use-local-storage/dist/index.js","../node_modules/@babel/runtime/helpers/esm/iterableToArray.js","../node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","../node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","../node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js"],"sourcesContent":["import { useEffect } from 'react';\r\nimport { useDispatch } from 'react-redux';\r\nimport { useHistory } from 'react-router-dom';\r\nimport useLocalStorage from 'use-local-storage';\r\nimport { createSave } from '../functions/create';\r\nimport { RootState } from '../store';\r\nimport * as actionCreator from '../store/actionCreator';\r\n\r\nexport function useSaves() {\r\n    const [savesList, setSavesList] = useLocalStorage<Save[]>('saves', []);\r\n    const dispatch = useDispatch();\r\n    const history = useHistory();\r\n\r\n    useEffect(() => {\r\n        if (!Array.isArray(savesList)) setSavesList([]);\r\n    }, [savesList]);\r\n\r\n    return {\r\n        savesList: savesList,\r\n        saveGame: (state: RootState) => {\r\n            const save = createSave(state);\r\n            setSavesList([save, ...savesList]);\r\n        },\r\n        deleteSave: (id: number) =>\r\n            setSavesList(savesList.filter(save => save.date !== id)),\r\n        deleteAllSaves: () => setSavesList([]),\r\n        loadSave: (id: number) => {\r\n            const save = savesList.find(save => save.date === id);\r\n            if (save) {\r\n                dispatch(actionCreator.loadGame(save.state));\r\n                history.push('/single');\r\n            } else {\r\n                console.error('The save requested for loading was not found.');\r\n            }\r\n        }\r\n    };\r\n}\r\n","// extracted by mini-css-extract-plugin\nexport default {\"wrapper\":\"SavesList_wrapper__si0r6\",\"player_icon\":\"SavesList_player_icon__EHgx-\",\"icon_conteiner\":\"SavesList_icon_conteiner__5Xkx9\",\"function_bar\":\"SavesList_function_bar__ctTIP\"};","import { FC } from 'react';\r\nimport {\r\n    getColorClassByPlayer,\r\n    getFormattedDate,\r\n    getIconByPlayerEntity\r\n} from '../../functions/common';\r\nimport styles from './SavesList.module.css';\r\n\r\ninterface Props {\r\n    saves: Save[];\r\n    deleteSave: (id: number) => void;\r\n    loadSave: (id: number) => void;\r\n}\r\n\r\nconst SavesList: FC<Props> = ({ saves, deleteSave, loadSave }) => {\r\n    try {\r\n        const getIconClass = (profile: PlayerProfile) => {\r\n            return `${styles.player_icon} ${getColorClassByPlayer(\r\n                profile.player\r\n            )}`;\r\n        };\r\n        const getIcon = (profile: PlayerProfile) =>\r\n            getIconByPlayerEntity(profile.entity.playerEntity);\r\n\r\n        return (\r\n            <div className={styles.wrapper}>\r\n                <table>\r\n                    <thead>\r\n                        <tr>\r\n                            <td>Date</td>\r\n                            <td>Turn</td>\r\n                            <td>Players</td>\r\n                            <td></td>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                        {saves.map(save => (\r\n                            <tr key={save.date}>\r\n                                <td onClick={() => loadSave(save.date)}>\r\n                                    {getFormattedDate(save.date)}\r\n                                </td>\r\n                                <td onClick={() => loadSave(save.date)}>\r\n                                    {save.state.gameState.moveNumber}\r\n                                </td>\r\n                                <td onClick={() => loadSave(save.date)}>\r\n                                    <div className={styles.icon_conteiner}>\r\n                                        {save.state.gameState.players.map(\r\n                                            (profile: PlayerProfile) => (\r\n                                                <div\r\n                                                    key={profile.player}\r\n                                                    className={getIconClass(\r\n                                                        profile\r\n                                                    )}\r\n                                                >\r\n                                                    {getIcon(profile)}\r\n                                                </div>\r\n                                            )\r\n                                        )}\r\n                                    </div>\r\n                                </td>\r\n                                <td\r\n                                    className={styles.function_bar}\r\n                                    onClick={() => deleteSave(save.date)}\r\n                                >\r\n                                    ðŸ—‘\r\n                                </td>\r\n                            </tr>\r\n                        ))}\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n        );\r\n    } catch {\r\n        return <div>Saves damaged</div>;\r\n    }\r\n};\r\n\r\nexport default SavesList;\r\n","// extracted by mini-css-extract-plugin\nexport default {\"page_wrapper\":\"MainMenuLoad_page_wrapper__alnh9 MainMenu_page_wrapper__2YKGi\",\"title\":\"MainMenuLoad_title__E7KYj MainMenu_title__iOdtM\",\"button\":\"MainMenuLoad_button__FX2AB components_button__6uL8D\",\"empty\":\"MainMenuLoad_empty__Y8lpx\"};","import { FC } from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\nimport SavesList from '../../../components/SavesList/SavesList';\r\nimport { useSaves } from '../../../hooks/useSaves';\r\nimport styles from './MainMenuLoad.module.css';\r\n\r\nconst MainMenuLoad: FC = () => {\r\n    const { savesList, loadSave, deleteSave, deleteAllSaves } = useSaves();\r\n    const { goBack } = useHistory();\r\n\r\n    const savesExist = savesList.length > 0 ? false : true;\r\n\r\n    return (\r\n        <div className={styles.page_wrapper}>\r\n            <h2 className={styles.title}>Loading</h2>\r\n            {!savesExist ? (\r\n                <SavesList\r\n                    saves={savesList}\r\n                    deleteSave={deleteSave}\r\n                    loadSave={loadSave}\r\n                />\r\n            ) : (\r\n                <div className={styles.empty}>Empty</div>\r\n            )}\r\n            <div>\r\n                <button\r\n                    className={styles.button}\r\n                    onClick={deleteAllSaves}\r\n                    disabled={savesExist}\r\n                >\r\n                    Clear all\r\n                </button>\r\n                <button className={styles.button} onClick={goBack}>\r\n                    Back\r\n                </button>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default MainMenuLoad;\r\n","import { RootState } from '.';\r\nimport { GameActions, GameActionType, playerMoving, SettingActions, SettingActionType } from './types';\r\n\r\n// common\r\nexport const loadGame = (payload: SaveData): GameActions => ({\r\n    type: GameActionType.LOAD_GAME,\r\n    payload: payload\r\n});\r\nexport const restartGame = (): GameActions => ({\r\n    type: GameActionType.RESTART_GAME,\r\n    payload: undefined\r\n});\r\nexport const startGame = (payload: GameForm): GameActions => ({\r\n    type: GameActionType.START_GAME,\r\n    payload: payload\r\n});\r\n\r\n// gameFieldReducer\r\nexport const cellIncrement = (payload: number): GameActions => ({\r\n    type: GameActionType.CELL_INCREMENT,\r\n    payload: payload\r\n});\r\nexport const cellZeroing = (payload: number): GameActions => ({\r\n    type: GameActionType.CELL_ZEROING,\r\n    payload: payload\r\n});\r\nexport const cellCapture = (payload: playerMoving): GameActions => ({\r\n    type: GameActionType.CELL_CAPTURE,\r\n    payload: payload\r\n});\r\nexport const CellCloning = (payload: Cell): GameActions => ({\r\n    type: GameActionType.CELL_CLONING,\r\n    payload: payload\r\n});\r\n\r\n// gameStateReducer\r\nexport const nextMover = (payload: Cell[][]): GameActions => ({\r\n    type: GameActionType.NEXT_MOVER,\r\n    payload: payload\r\n});\r\nexport const blockMoving = (): GameActions => ({\r\n    type: GameActionType.BLOCK_MOVING,\r\n    payload: undefined\r\n});\r\nexport const allowMoving = (): GameActions => ({\r\n    type: GameActionType.ALLOW_MOVING,\r\n    payload: undefined\r\n});\r\nexport const newMove = (payload: Cell[][]): GameActions => ({\r\n    type: GameActionType.NEW_MOVE,\r\n    payload: payload\r\n});\r\nexport const playerMove = (payload: Cell): GameActions => ({\r\n    type: GameActionType.PLAYER_MOVE,\r\n    payload: payload\r\n});\r\n\r\n// gameSettingReducer\r\nexport const resetSettings = (): SettingActions => ({\r\n    type: SettingActionType.RESET_TO_DEFAULT,\r\n    payload: undefined\r\n});\r\nexport const setSettings = (payload: GameSettings): SettingActions => ({\r\n    type: SettingActionType.SET_SETTING,\r\n    payload: payload\r\n});\r\n","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar react_1 = require(\"react\");\nfunction useLocalStorage(key, defaultValue, options) {\n    var opts = react_1.useMemo(function () {\n        return __assign({ serializer: JSON.stringify, parser: JSON.parse, logger: console.log, syncData: true }, options);\n    }, [options]);\n    var serializer = opts.serializer, parser = opts.parser, logger = opts.logger, syncData = opts.syncData;\n    var _a = react_1.useState(function () {\n        if (typeof window === \"undefined\")\n            return defaultValue;\n        try {\n            var item = window.localStorage.getItem(key);\n            var res = item ? parser(item) : defaultValue;\n            return res;\n        }\n        catch (e) {\n            logger(e);\n            return defaultValue;\n        }\n    }), storedValue = _a[0], setValue = _a[1];\n    react_1.useEffect(function () {\n        if (typeof window === \"undefined\")\n            return;\n        var updateLocalStorage = function () {\n            if (storedValue !== undefined) {\n                window.localStorage.setItem(key, serializer(storedValue));\n            }\n            else {\n                window.localStorage.removeItem(key);\n            }\n        };\n        try {\n            updateLocalStorage();\n        }\n        catch (e) {\n            logger(e);\n        }\n    }, [storedValue]);\n    react_1.useEffect(function () {\n        if (!syncData)\n            return;\n        var handleStorageChange = function (e) {\n            if (e.key !== key || e.storageArea !== window.localStorage)\n                return;\n            try {\n                setValue(e.newValue ? parser(e.newValue) : undefined);\n            }\n            catch (e) {\n                logger(e);\n            }\n        };\n        if (typeof window === \"undefined\")\n            return;\n        window.addEventListener(\"storage\", handleStorageChange);\n        return function () { return window.removeEventListener(\"storage\", handleStorageChange); };\n    }, [key, syncData]);\n    return [storedValue, setValue];\n}\nexports.default = useLocalStorage;\n","export default function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n}","import arrayWithoutHoles from \"./arrayWithoutHoles.js\";\nimport iterableToArray from \"./iterableToArray.js\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nimport nonIterableSpread from \"./nonIterableSpread.js\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}","import arrayLikeToArray from \"./arrayLikeToArray.js\";\nexport default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}"],"names":["useSaves","useLocalStorage","savesList","setSavesList","dispatch","useDispatch","history","useHistory","useEffect","Array","isArray","saveGame","state","save","createSave","deleteSave","id","filter","date","deleteAllSaves","loadSave","find","actionCreator","push","console","error","saves","getIconClass","profile","styles","getColorClassByPlayer","player","getIcon","getIconByPlayerEntity","entity","playerEntity","className","map","onClick","getFormattedDate","gameState","moveNumber","players","goBack","savesExist","length","disabled","loadGame","payload","type","GameActionType","restartGame","undefined","startGame","CellCloning","newMove","playerMove","resetSettings","SettingActionType","setSettings","__assign","this","Object","assign","t","s","i","n","arguments","p","prototype","hasOwnProperty","call","apply","defineProperty","exports","value","react_1","require","key","defaultValue","options","opts","useMemo","serializer","JSON","stringify","parser","parse","logger","log","syncData","_a","useState","window","item","localStorage","getItem","e","storedValue","setValue","setItem","removeItem","handleStorageChange","storageArea","newValue","addEventListener","removeEventListener","_iterableToArray","iter","Symbol","iterator","from","_toConsumableArray","arr","arrayLikeToArray","iterableToArray","unsupportedIterableToArray","TypeError"],"sourceRoot":""}